/* eslint-disable react-hooks/exhaustive-deps */
import NFTItem from '../components/NFTItem';
import useFetch from '../hooks/useFetch';
import React, {useState, useEffect} from 'react';
import { useWallet } from '@solana/wallet-adapter-react';
import { useParams } from "react-router-dom";
import Loader from "../components/Loader";

export default function NFTMarketplace () {
    const [connectedNft, setConnectedNft] = useState(false);
    const wallet = useWallet();
    const {get, loader} = useFetch();
    const params = useParams();
    const collection = params.collectionId;

    const nftCollection: any[] = [
        {"id":1797186,"token_add":"BWpJp69ZevquUihzch5bXae46PLxe6PSVo62UG7NjNSA","price":18,"for_sale":1,"link_img":"https://arweave.net/LCoeTg6sLewFdnDMWyvHnwWghLx2Z9QFI9082ol214k","name":"Aurorian #4676","escrowAdd":"HEMwh3bNYn8zbkZDPKf1GZcp8nZBdUWX3LXgNCXh9TWV","seller_address":"Cx9ffMi61YCishvbKQEPL1T3KPsS5injkckM7ovTYZP1","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Mouth: Base Mouth,Eyes: Red Eyes,Hair: Pigtails,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18},{"id":1855879,"token_add":"79tVFxpBo6j17v1ZJoaVYNphs7KqbFFv6z43q5icvDFw","price":18,"for_sale":1,"link_img":"https://arweave.net/PZM_2MLFavlpYFnwZ0U1rn6ySa2q9h_HyxWltGxemFQ","name":"Aurorian #4978","escrowAdd":"ATzJsBkiDCiu4zN4q2ydvLRX6jfuo7BZEGd94YbgXeKC","seller_address":"B67dr1JwVzMHen7KomZxifkjbfFX3HmfErJKqqoLqpJb","attributes":"Background: Soft Blue,Skin: Human,Cloth: Base Cloth,Necklace: Aurory Necklace,Mouth: Base Mouth,Eyes: Viper Shades,Hair: Green Hair,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18.440001},{"id":1847185,"token_add":"A7WqC8MqoB3NrU1WYmAE1A8dauc2QMQA8SzonxksY5pw","price":18.1,"for_sale":1,"link_img":"https://arweave.net/8ud_jpeQ_J_AN2lH823IuuqNVWN6vSCrk1jVy0Qzj4s","name":"Aurorian #3576","escrowAdd":"H1Sm3ywbQYGaxMpCtWLzHWE13oJtcYSCyYQasB2fWFZv","seller_address":"88gNHWScPbq75QunYtRi84YqvKwJZ1cjmqrF7chp8VXo","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Necklace: Aurory Necklace,Mouth: Plague Mask,Eyes: Base Eyes,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18.1},{"id":1845041,"token_add":"Be8ANkvSbVTxA9JR9XpJ21ygwk36AhQCgEDkTi757Ewb","price":18.469999,"for_sale":1,"link_img":"https://arweave.net/LhVXNMSub2dGw3IT7rirqwIty1293fbfLcDLBBFGHHY","name":"Aurorian #5738","escrowAdd":"GkdTAyccsGieQAszwq28Dozv75mKt1FXVj8qFy2amC6Q","seller_address":"82cSo32UKcijjCcCxEwXeKuzXVGuK7T931t3keBgJkuG","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Necklace: Shark Necklace,Mouth: Barely Angry,Eyes: Black Eyes,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18.469999},{"id":1836568,"token_add":"7e8E4JuZ9ZAY2e1WTWZuZmAShvKdBEE8pZdRqqYcmYEw","price":18.48,"for_sale":1,"link_img":"https://arweave.net/HTeFSRUrsw8HLAMHInB22WbU_Krj-gWEKAc3DQinY5E","name":"Aurorian #2744","escrowAdd":"FwGFi5khjWRjwvWLxSgDqgEVcvUQT4t3TLYsBL2tKTab","seller_address":"7MAwoZ8YMd7Zfn6RN15qJn1c7aJj9YWggfNm5a2YGPAs","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Mouth: Zipper Mask,Eyes: Base Eyes,Hair: Green Hair,Type: Aurorian,generation: 1, sequence: 2744","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":14},{"id":1848752,"token_add":"DwcyyBn5emL8rFTYqH4g9YS9pSPdWKGmr7DRJzjusQ2P","price":18.5,"for_sale":1,"link_img":"https://arweave.net/D2RTbOF-6S3LZCjAYGiQA_TUQrzkYO9Sf63ka6h7VP0","name":"Aurorian #7732","escrowAdd":"GcgZjHuHoieehQ3SLaXKLwQq9NusxNBtFQxCaXNwHkGk","seller_address":"2LtxXMSY2HGGzkSPLz1DMfrWHPfXJ3L6gmiKSefeYUP2","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Necklace: Aurory Necklace,Mouth: Zipper Mask,Eyes: Green ,Hair: Combed Haircut,Hat: Raccoon Hat,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18.5},{"id":1860160,"token_add":"6Pw7QDhntChYwK4pYUof9gY2xtFEzZN8oYmEAns2Piv3","price":18.9,"for_sale":1,"link_img":"https://arweave.net/TUEnC8qp26g8Ct5tkCRqZEzcDvJqw4Xa1tG_cDdN-VE","name":"Aurorian #1824","escrowAdd":"6mMAsWP13F2DS45FWyRCpYgWJEGh5eSLs95RLGfUA2NW","seller_address":"8XvhU9xWMFcPmCdnAStvh9BRFunDgnpre9Y1PAWXJ7Tq","attributes":"Background: Base Background,Skin: Human,Cloth: Overalls,Necklace: Shark Necklace,Mouth: Big Smile,Eyes: Cat Green Pupil,Hair: Pigtails,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18.9},{"id":1839520,"token_add":"CQ7FWgSMnPjdYjAEiJdPwzYe6Vp4BMH2hvNa3kCtXi6J","price":19,"for_sale":1,"link_img":"https://arweave.net/rDgPU2gg-seHwcpDgQ3x5n6-WXtRFgzl2MoN-JoC8Fc","name":"Aurorian #6900","escrowAdd":"TP7zKdtJpVaRZacexEsx9BrGhZbf7ifAQtkZY96GqwD","seller_address":"9N9c3WuMMJHXWTZSrsi2PXprtyq3F7VoCf4qH9rkznqS","attributes":"Background: Base Background,Skin: Human,Cloth: Classy Outfit,Necklace: Shark Necklace,Mouth: Base Mouth,Eyes: Green ,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":19},{"id":1849413,"token_add":"8AKNcB7HtK46NubBCrSKW7Y1amqwnt7Ebc18niNbRVWk","price":19,"for_sale":1,"link_img":"https://arweave.net/GaJC8MG_A6dQiy06TkDOUrRFtzdYSwsOeG_rtF50HSA","name":"Aurorian #4632","escrowAdd":"H3CoHNpjjagdmrTJxxkRhZPKizK3Cj5eEFZvoBeVxvi4","seller_address":"6PcySfuBme1bWzieXXse8rJuRJG6DvfqLfviRqQa4Jh5","attributes":"Background: Soft Blue,Skin: Human,Cloth: Base Cloth,Necklace: Flower Necklace,Mouth: Plague Mask,Eyes: Base Eyes,Hair: Combed Haircut,Hat: Big Crown,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18},{"id":1859439,"token_add":"9oLzkozStpGqEUVDDt5RqRiPyJpWVnqvx927g3b7Fim4","price":19,"for_sale":1,"link_img":"https://arweave.net/03y5V2pQSEGY7j18EELUYpWUPyrlfV45IDTY4ZRcI3w","name":"Aurorian #3085","escrowAdd":"6VavDSieDKtUAm8WCJJmcubCkDcHQifXbyhBg2Zk8LfL","seller_address":"ATfMWuP8biBsosWDcTVmzhTKDCU1rKGsLxLfX17yBVK7","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Necklace: Aurory Necklace,Mouth: Oni Mask,Eyes: Base Eyes,Hair: Shaved,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":null},{"id":1816705,"token_add":"6Bip7bTyqoimagoxomU4eiiCeVVSfHUBaU8ep8hYPqJE","price":19.200001,"for_sale":1,"link_img":"https://arweave.net/AOfOzLbOwwqltIMMKK-7VZ89v25u7cY33ujPiX_ra_g","name":"Aurorian #8589","escrowAdd":"8ffYC2UD2p2KfrEYZFBUU4DiqafrGCCReD3jL5fjYsiV","seller_address":"4BXeUsEQyY9AoofdUxCyA66M6HSoi9jV3fsW73m6Nqon","attributes":"Background: Base Background,Skin: Human,Cloth: Jacket,Necklace: Flower Necklace,Mouth: Plague Mask,Eyes: Red Eyes,Hair: Pigtails,Type: Aurorian,generation: 1, sequence: 8589","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":19.200001},{"id":1008510,"token_add":"F5CXne4YxqjqKHJTtKwB2f26LpDy3xai4chGBhGLsPEF","price":19.969999,"for_sale":1,"link_img":"https://arweave.net/hk5HHg_MqzPV7JYMg8QSIh9wchkMcYtJRepjKrdMxac","name":"Aurorian #8815","escrowAdd":"4hDwopJYpdJcnfB2Xkz3LX4akx5TCsaVuzPh2fQwNefQ","seller_address":"46RX8RueTakms3MxrP9XYUTPz2kpKiCNhiypX36URjNk","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Mouth: Base Mouth,Eyes: Green ,Hair: Green Hair,Type: Aurorian,generation: 1, sequence: 8815","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":19.969999},{"id":1305604,"token_add":"Huu1pZKW5NZGTXkhH2U7kecqgWTjgnYmPTpJP4D8MGFb","price":20,"for_sale":1,"link_img":"https://arweave.net/q3S5KOJZndG20doIKQP4Yy5p-B45soizK1INOuwQ6_w","name":"Aurorian #8258","escrowAdd":"6FzGKkvEx8CVqFPou8w6ayTd6asrvQYyhW63eun7rnE1","seller_address":"8ugbrNcHej8J1unmPWWBwtAN35nYNwDqMBxqHxccb9iW","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Mouth: Oni Mask,Eyes: Base Eyes,Hair: Playmobil ,Type: Aurorian,generation: 1, sequence: 8258","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":20},{"id":1815632,"token_add":"2wEB8Pskcet1FiDSPcHpJsp8rNK3NbDpeGqg9xsKeisL","price":20,"for_sale":1,"link_img":"https://arweave.net/pW_eZZojPrAcf7oDjMIK2KwaUq9jEc8kFP8sfGXi9F8","name":"Aurorian #7271","escrowAdd":"7ozYnkoMgsHuH7ze43gs1CL4izwp8Xdu49nmJ8gkamNW","seller_address":"HynNKDvPrTJSNqvPhbYfGu7UeM5ZRTQ2egd6rtkgC4mX","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Necklace: Aurory Necklace,Mouth: Big Smile,Eyes: Green Eyes,Hair: Combed Haircut,Hat: Feather Hat,Type: Aurorian,generation: 1, sequence: 7271","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":20},{"id":1843037,"token_add":"5uqoaU1c6F8e8gL57Fi9aJXgx3RpBa12E3rZxMrcgKqC","price":20,"for_sale":1,"link_img":"https://arweave.net/PnIyabBwurVBQs3lkRybc7oA1hzG6DQOj2F2O-p387U","name":"Aurorian #2805","escrowAdd":"6JayoKdEn4yNkhBRB4VmCwYE3n79qTs4PUm1pRsHR845","seller_address":"3iMNngRUK8W1Pfrsj3gAxbPuQXmcb3QJtHzDtdH811Qj","attributes":"Background: Base Background,Skin: Human,Cloth: Black T-Shirt,Mouth: Paint Mask,Eyes: Base Eyes,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":20},{"id":1843045,"token_add":"D7n1CKKs6Xm1uiz42z47SisrKWEUh5uuuG5xnjWeYmda","price":20,"for_sale":1,"link_img":"https://arweave.net/FA2_iHbUz3qxpYVI6yFe1LqnUzRx-bevfGwv9qZ9umU","name":"Aurorian #5401","escrowAdd":"BtvssvJm7kRkxZPEt259RjLxtbu8m8ye8GCc1XGyMiz","seller_address":"3iMNngRUK8W1Pfrsj3gAxbPuQXmcb3QJtHzDtdH811Qj","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Mouth: Base Mouth,Eyes: Green ,Hair: Undercut,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":20},{"id":1846314,"token_add":"EBo8to128vJKGGcBG4EgcyD9F89ZjwG6LZjVBqaWrYyH","price":20,"for_sale":1,"link_img":"https://arweave.net/EpfKk9BUv1uxewEWlDOW7iVod_hTLNmoF7zU_TrBewE","name":"Aurorian #421","escrowAdd":"BWWY5MTRKhADn4DPeNYEnwKAkze2PtQB7uBYsk1sGPWB","seller_address":"7FkhEmjFyL8sEmTgmfUTkmJHzjnkv9QvLTZ5pg24X8dh","attributes":"Background: Base Background,Skin: Human,Cloth: Jacket,Necklace: Aurory Necklace,Mouth: Lollipop ,Eyes: Base Eyes,Hat: Doughnut Hat,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":17.9},{"id":1859282,"token_add":"AyHparJHNabszA9CiJ19BtNuxkRX9d8SZcjm8sNwc8Ux","price":20,"for_sale":1,"link_img":"https://arweave.net/irYYWC4mKj4-800jShf19UjI1gIs5tTFrkvSl9eiKEE","name":"Aurorian #582","escrowAdd":"8ha8pdaZ8b6iges1EwrM7FTDbpVVuGUWJfYj8haCvZ71","seller_address":"CsRnxDXWmeM3fnBTvZp2j3ShZhCAkwqa9dZiWtEhpDkJ","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Necklace: Aurory Necklace,Mouth: Zipper Mask,Eyes: Base Eyes,Hat: Big Crown,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":null},{"id":1785760,"token_add":"GETUJFHbknuRN19TRnBAWUwCGtLxNciZzYtsj5G4e1Cz","price":20.5,"for_sale":1,"link_img":"https://arweave.net/zXmm9M9hy06TE7ylsjdyuhChpQBiLJ1IVJ8PxOWcBC0","name":"Aurorian #770","escrowAdd":"HXWeSB2rArcJ1XQf2P5r26bsrUjsTs6H56jk79t74pty","seller_address":"4NWAA26qBPV7FVwkegU6PZ3VCS4QgGQAQ1UQXZrSUppy","attributes":"Background: Base Background,Skin: Human,Cloth: Base Cloth,Necklace: Aurory Necklace,Mouth: Base Mouth,Eyes: Blue Skull Glasses,Hair: Pigtails,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":20.5},{"id":1848883,"token_add":"9tbn8S7Y6cRX3BDAybof9HEmS1cqTM53KqKjPqBDp7T5","price":20.5,"for_sale":1,"link_img":"https://arweave.net/gkBzuvpeyPej23afpbUpUFhobSdoAf8S8hVw5TsKjAE","name":"Aurorian #4584","escrowAdd":"CeB7k5yaMXfRjuwpXi5CjJ97dcTWKPwJz1ioPHS4WFpa","seller_address":"DmLuXPy5sNJwX5e1NsAbwGMdKKcNCn9ZgAkuSAKZn8s5","attributes":"Background: Base Background,Skin: Human,Cloth: Overalls,Necklace: Solana Necklace,Mouth: Paint Mask,Eyes: Base Eyes,Hair: Blond Hair Attached,Type: Aurorian,generation: 1","skin":null,"type":"aurory","ranking":null,"lastSoldPrice":18}
    ];

    const myNftButtonHandler = (event: React.MouseEvent<HTMLButtonElement>) => {
        setConnectedNft(true);
        event.preventDefault();
    };

    const nftButtonHandler = (event: React.MouseEvent<HTMLButtonElement>) => {
        setConnectedNft(false);
        event.preventDefault();
    };

    return (

        <div className="body">
            <div className="nft-marketplace-wrapper">
                <h1 className="nft-marketplace-header">{params.collectionId}</h1>
                <div className="nft-marketplace-items-wrapper">
                    <div className="decor"></div>
                    {connectedNft && <div className="nft-items-wrapper">
                    </div> }
                    { !connectedNft && <div className="nft-items-wrapper">
                    { !nftCollection ? <div>nothing here</div> : nftCollection?.map((nft, index) => {
                         return <NFTItem id={nft.id} token_add={nft.token_add} price={nft.price} img={nft.link_img} name={nft.name} owner={nft.seller_address} attr={nft.attributes} collectionId={params.collectionId} key={index} />
                    }
                    )}
                    </div>}

                    <div className="arrows">

                    </div>
                </div>
            </div>
        </div>
    )
}
